(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{331:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"使用-pnpm-的工作空间-workspace-搭建-taro3-ui-流程记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-pnpm-的工作空间-workspace-搭建-taro3-ui-流程记录"}},[s._v("#")]),s._v(" 使用 pnpm 的工作空间（Workspace）搭建 taro3-UI 流程记录")]),s._v(" "),t("h3",{attrs:{id:"pnpm-的工作空间-workspace-介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-的工作空间-workspace-介绍"}},[s._v("#")]),s._v(" pnpm 的工作空间（Workspace）介绍")]),s._v(" "),t("blockquote",[t("p",[s._v("pnpm 内置了对单一存储库（也称为多包存储库、多项目存储库或单体存储库）的支持， 你可以创建一个 workspace 以将多个项目合并到一个仓库中。一个 workspace 的根目录下必须有"),t("a",{attrs:{href:"https://pnpm.io/zh/pnpm-workspace_yaml",target:"_blank",rel:"noopener noreferrer"}},[s._v("pnpm-workspace.yaml"),t("OutboundLink")],1),t("code",[s._v("文件， 也可能会有")]),t("a",{attrs:{href:"https://pnpm.io/zh/npmrc",target:"_blank",rel:"noopener noreferrer"}},[s._v(".npmrc"),t("OutboundLink")],1),t("code",[s._v("文件。")])])]),s._v(" "),t("p",[s._v("目前使用了 pnpm 工作空间功能的最受欢迎的开源项目")]),s._v(" "),t("p",[t("code",[s._v("Next,js")]),s._v(" "),t("code",[s._v("Vite")]),s._v(" "),t("code",[s._v("Vue")]),s._v(" "),t("code",[s._v("Element Plus")]),s._v(" "),t("code",[s._v("Vant")])]),s._v(" "),t("h3",{attrs:{id:"搭建流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建流程"}},[s._v("#")]),s._v(" 搭建流程")]),s._v(" "),t("h3",{attrs:{id:"整体项目搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#整体项目搭建"}},[s._v("#")]),s._v(" 整体项目搭建")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("使用 pnpm 初始化项目")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" taro-lib-3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" taro-lib-3\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" init\n")])])])]),s._v(" "),t("li",[t("p",[s._v("安装 estint、prettier、husky")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" eslint prettier "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("安装 ts 支持")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" typescript "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" //安装 ts 模块\n")])])])]),s._v(" "),t("li",[t("p",[s._v("monorepo 支持相关的配置")])])]),s._v(" "),t("ul",[t("li",[s._v("项目根目录创建 pnpm-workspace.yaml 文件，定义"),t("code",[s._v("workspace")]),s._v("的根目录"),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" pnpm-workspace.yaml\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" packages\n")])])])])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[t("p",[s._v("初始化 ts 配置")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("npx tsc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--init")]),s._v("   //自动生成 tsconfig.json\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" tsconfig.build.json    // 创建一个全局 ts build 配置文件\n\n// tsconfig.build.json 配置\n")])])])]),s._v(" "),t("li",[t("p",[s._v("pnpm 配置")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pnpm install --shamefully-hoist"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("配置"),t("code",[s._v("shamefully-hoist")]),s._v("参数为了能在 demo 项目中正常使用组件库项目的依赖")])]),s._v(" "),t("blockquote",[t("p",[s._v("默认情况下，pnpm 创建一个半严格的 node_modules，这意味着依赖项可以访问未声明的依赖项，但 node_modules 之外的模块不行。 通过这种布局，生态系统中的大多数的包都可以正常工作。 但是，如果某些工具仅在提升的依赖项位于根目录的 node_modules 时才有效，您可以将其设置为 true 来为您提升它们。")])]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://pnpm.io/zh/npmrc#shamefully-hoist",target:"_blank",rel:"noopener noreferrer"}},[s._v("shamefully-hoist 配置说明"),t("OutboundLink")],1)])])])]),s._v(" "),t("h3",{attrs:{id:"组件库项目搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件库项目搭建"}},[s._v("#")]),s._v(" 组件库项目搭建")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("创建并初始化组件源码项目")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" packages\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" tzo-ui "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" tzo-ui\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" init\n")])])])]),s._v(" "),t("li",[t("p",[s._v("安装相关依赖")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" react react-dom react-native "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("   //安装 react 相关依赖\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" typescript "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("   //安装 ts 模块\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @types/classnames @types/node @types/react @types/react-dom @types/react-native "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("   //安装 ts 类型相关依赖\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" rollup rollup-plugin-copy rollup-plugin-typescript2 rollup-plugin-visualizer @rollup/plugin-commonjs @rollup/plugin-json @rollup/plugin-node-resolve "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("   // 安装 rollup 与相关构建依赖\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @tarojs/components @tarojs/react @tarojs/taro "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("   //安装 taro 相关依赖\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" classnames @lylb/zo-util   //安装需要使用的工具\n")])])])]),s._v(" "),t("li",[t("p",[s._v("编写 ts 配置")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("npx tsc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--init")]),s._v(" //自动生成 tsconfig.json\n")])])]),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编写 tsconfig.build.json")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"extends"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"../../tsconfig.build"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compilerOptions"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"target"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"es2017"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"module"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"es6"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"outDir"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./lib"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"include"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/**/*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("添加入口文件")])])]),s._v(" "),t("p",[s._v("上面 ts 配置已经添加编译文件路径，先创建 src 目录")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" src "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" src\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" index.ts\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("进行 rollup 打包构建配置")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("// 根目录创建 tsconfig.rollup.json\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" tsconfig.rollup.json\n\n// 创建 config 文件夹 用来储存 rollup 配置文件\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" config\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" rollup.config.js\n// 编写 rollup 配置文件\n")])])]),t("ol",{attrs:{start:"6"}},[t("li",[s._v("编写 package.json 中的 scripts 命令")])]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run dev:lib"')]),s._v("，\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev:lib"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc --project ./tsconfig.build.json --watch --incremental"')]),s._v("，\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yarn run build:rollup && yarn run build:lib"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:lib"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc --project ./tsconfig.build.json"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:rollup"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rollup --config ./config/rollup.config.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("开始编写组件代码")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" src "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" src   // 创建代码目录 src 目录\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" common   // 创建公共方法目录\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" components   // 创建组件代码目录\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" style   // 创建样式文件目录\n")])])]),t("h3",{attrs:{id:"demo-项目搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#demo-项目搭建"}},[s._v("#")]),s._v(" demo 项目搭建")]),s._v(" "),t("ol",[t("li",[s._v("创建 demo 项目")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" packages   // 进入 packages\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" @tarojs/cli   // 安装 tarojs/cli 脚手架 并创建项目\n\ntaro init tzo-ui-demo   // 记得选择 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" 初始化项目\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("项目添加 tzo-ui 组件库")])]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tzo-ui"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"workspace:\\*"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 指向 pnpm 空间中的 tzo-ui 项目")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),t("h3",{attrs:{id:"项目工程化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目工程化"}},[s._v("#")]),s._v(" 项目工程化")]),s._v(" "),t("p",[t("strong",[s._v("提示")]),s._v(" 可参考文章分类"),t("RouterLink",{attrs:{to:"/pages/209fb8/"}},[s._v("前端工程")])],1),s._v(" "),t("p",[s._v("在前面已经介绍安装了"),t("code",[s._v("eslint")]),s._v("和"),t("code",[s._v("prettier")]),s._v(" 接下来进行相关配置")]),s._v(" "),t("ol",[t("li",[s._v("安装"),t("code",[s._v("eslint")]),s._v("相关依赖")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" eslint-config-taro eslint-config-o2team eslint-import-resolver-custom-alias eslint-plugin-import eslint-plugin-react eslint-plugin-react-hooks "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("安装"),t("code",[s._v("prettier")]),s._v("相关依赖")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# eslint-config-prettier 用于解决eslint与prettier")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# eslint-plugin-prettier")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" eslint-plugin-prettier eslint-config-prettier "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("创建 eslint 文件进行配置")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" .eslintrc.json  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用于配置规则与规范")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" .eslintignore  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用于忽略文件配置")]),s._v("\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("创建"),t("code",[s._v(".prettierrc")]),s._v("配置文件")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" .prettierrc\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("项目添加"),t("code",[s._v("husky")]),s._v("与"),t("code",[s._v("lint-staged")])])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" husky lint-staged "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("安装好"),t("code",[s._v("husky")]),s._v("依赖后 添加"),t("code",[s._v("scripts")]),s._v("指令")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepare"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"husky install"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("执行命令"),t("code",[s._v("pnpm run prepare")]),s._v(" 根目录会自动生成 "),t("code",[s._v(".husky")]),s._v("目录")]),s._v(" "),t("p",[s._v("添加"),t("code",[s._v("pre-commit")]),s._v("的 hook")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("npx husky "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/pre-commit "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npx lint-staged"')]),s._v("\n")])])]),t("p",[s._v("这里用到了"),t("code",[s._v("lint-staged")]),s._v("这个工具 我们需要添加这个配置")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" .lintstagedrc.json "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根目录添加lint-staged的配置文件")]),s._v("\n")])])]),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .lintstagedrc.json")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"*.{js,jsx,ts,tsx}"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prettier --write ."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint  --fix"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 进行格式化与eslint的fix")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("此时我们进行代码提交就会运行设置的"),t("code",[s._v("git hook")])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[t("code",[s._v("commitlint")]),s._v(" 与 "),t("code",[s._v("commitizen")]),s._v(" 配置")])]),s._v(" "),t("p",[t("strong",[s._v("安装 commitlint 相关依赖")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @commitlint/cli @commitlint/config-conventional "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[t("strong",[s._v("添加 commitlint 配置")])]),s._v(" "),t("p",[s._v("根目录创建"),t("code",[s._v("commitlint.config.js")]),s._v("配置文件 并写入规则 使用"),t("code",[s._v("@commitlint/config-conventional")]),s._v("规则")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"module.exports = {extends: ['@commitlint/config-conventional']}\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" commitlint.config.js\n")])])]),t("p",[t("strong",[s._v("安装辅助提交依赖（commitizen）")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" commitizen cz-conventional-changelog "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("安装好相关依赖后 需要在"),t("code",[s._v("package.json")]),s._v("进行配置")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"script"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cz"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加提交指令 使用cz提交")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commitizen"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cz-conventional-changelog"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用这个依赖提供的预设")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("strong",[s._v("添加 commitizen 的自定义提示信息")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" cz-customizable "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),t("p",[s._v("当"),t("code",[s._v("cz-customizable")]),s._v("安装好之后 就需要在"),t("code",[s._v("packgae.json")]),s._v("中的"),t("code",[s._v("commitizen")]),s._v("配置")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commitizen"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node_modules/cz-customizable"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将提示信息依赖修改成cz-customizable")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("经过上面的配置 就可以自定义提示信息了")]),s._v(" "),t("p",[s._v("这就需要新增一个自定义内容文件")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" .cz-config.js\n")])])]),t("p",[t("code",[s._v(".cz-config.js")]),s._v("文件就是用来自定义提示信息")])])}),[],!1,null,null,null);t.default=e.exports}}]);